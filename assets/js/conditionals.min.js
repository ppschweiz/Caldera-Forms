var calders_forms_check_conditions,calders_forms_init_conditions;!function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=r);r>a;a++)if(a in this&&this[a]===e)return a;return-1}),calders_forms_check_conditions=function(r){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[r]){var a=e("#"+r);for(var t in caldera_conditionals[r]){var o=jQuery("#conditional_"+t);if(o.length){var i=caldera_conditionals[r][t].type,n=caldera_conditionals[r][t].group,s=[];for(var d in n){var l={},c=n[d];for(var f in c){var h=a.find('[data-field="'+c[f].field+'"]'),u=[],g="function"==typeof c[f].value?c[f].value():c[f].value;if("undefined"!=typeof c[f].selectors)for(var m in c[f].selectors){var p=new RegExp(m,"g");g=g.replace(p,e(c[f].selectors[m]).val())}if(l[f]=!1,h.is(":radio,:checkbox")?h=h.filter(":checked"):h.is("div")&&(h=jQuery("<input>").val(h.html())),h.length)for(var _=0;_<h.length;_++)u.push(h[_].value);else u.push(c[f].field);switch(c[f].compare){case"is":u.length&&u.indexOf(g.toString())>=0&&(l[f]=!0);break;case"isnot":u.length&&u.indexOf(g)<0&&(l[f]=!0);break;case">":case"greater":l[f]=parseFloat(u.reduce(function(e,r){return e+r}))>parseFloat(g);break;case"<":case"smaller":l[f]=parseFloat(u.reduce(function(e,r){return e+r}))<parseFloat(g);break;case"startswith":for(var _=0;_<u.length;_++)u[_].toLowerCase().substr(0,g.toLowerCase().length)===g.toLowerCase()&&(l[f]=!0);break;case"endswith":for(var _=0;_<u.length;_++)u[_].toLowerCase().substr(u[_].toLowerCase().length-g.toLowerCase().length)===g.toLowerCase()&&(l[f]=!0);break;case"contains":for(var _=0;_<u.length;_++)u[_].toLowerCase().indexOf(g)>=0&&(l[f]=!0)}}istrue=!0;for(var v in l)if(l[v]===!1){istrue=!1;break}s.push(istrue)}var y,b=jQuery("#conditional-"+t+"-tmpl").html(),w=jQuery("#conditional_"+t),k=jQuery('[data-field="'+t+'"]');s.length&&s.indexOf(!0)>=0?"show"===i?y="show":"hide"===i?y="hide":"disable"===i&&(y="disable"):y="show"===i?"hide":"disable"===i?"enable":"show","show"===y?w.html().length||(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===y?w.html().length&&(k.val("").empty().prop("checked",!1),w.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===y?w.html().length?k.prop("disabled",!1):(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===y&&(w.html().length?k.prop("disabled","disabled"):(w.html(b).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+t+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",function(r){var a=e(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(a)}),e(".caldera_forms_form").each(function(){calders_forms_check_conditions(e(this).closest(".caldera_forms_form").prop("id"))})},"undefined"!=typeof caldera_conditionals&&calders_forms_init_conditions()}(jQuery);